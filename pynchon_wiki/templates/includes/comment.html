{% load thumbnail %}
<article id='{{ comment.id }}'>
    <div class="mb-3">
        <small>Стр.{{ comment.page_number_by_2012 }}/ Стр.{{ comment.page_number_by_2021 }}</small>
    </div>
    <div class="mb-3">
        <h4 class="fw-bold">{{ comment.name|linebreaks }}</h4>
    </div>
    <div class="row mb-3">
        <div class="col-md-8">
            {{ comment.comment_text|safe|linebreaks }}
        </div>
        {% if comment.image %}
            <div class="col-md-4 mb-5">
                {% thumbnail comment.image "1600x900" as thumbnail %}
                <div class="position-relative" style="height: 224px; width: 400px;">
                    <img class="w-100" src="{{ thumbnail.url }}" alt="{{ comment.image.alt }}" data-bs-toggle="modal"
                         data-bs-target="#image-modal-{{ comment.pk }}" style="object-fit: contain; max-height: 100%; max-width: 100%;">
                </div>
                {% endthumbnail %}
                <div class="modal fade" id="image-modal-{{ comment.pk }}" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-lg" style="width: 70%; height: 70%; max-width: none;">
                        <div class="modal-content">
                            <div class="modal-body text-center">
                                <img src="{{ comment.image.url }}" style="max-width: 100%; max-height: 90vh; object-fit: contain;"
                                     alt="{{ comment.image.alt }}">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}
    </div>
    {% if comment.links %}
        <div class="mb-3">
            <p class="text-primary">Ссылка, упомянутая в примечании: <a href="{{ comment.links }}">{{ comment.links }}</a></p>
        </div>
    {% endif %}
</article>